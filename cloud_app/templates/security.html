<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>CloudJournee | Cloud Optimization</title>
      {% load static %}
      <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
      <link href="{% static 'font-awesome/css/font-awesome.css' %}" rel="stylesheet">
      <link href="{% static 'css/animate.css' %}" rel="stylesheet">
      <link href="{% static 'css/style.css' %}" rel="stylesheet">
      <link href="{% static 'css/table.css' %}" rel="stylesheet">
      <!-- <link href="css/plugins/morris/morris-0.4.3.min.css" rel="stylesheet">-->
      <link href="{% static 'css/plugins/c3/c3.min.css' %}" rel="stylesheet">
      <link href="{% static 'css/plugins/footable/footable.core.css' %}" rel="stylesheet">

      <div class="modal inmodal" id="loading" tabindex="-1" role="dialog" aria-hidden="true">
               <div class="modal-dialog" style="padding-top: 2px; top: 25%; left: 20%;">
                  <img src="{% static 'images/loading-green.gif'%}" width="150" height="150"  />
               </div>
            </div>

   </head>
   <body>
      <div class="body-opacity" id="wrapper">
         <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
               <ul class="nav metismenu" id="side-menu">
                  <li class="nav-header">
                     <div class="dropdown profile-element">
                        <span>
                           <h1 style="color: white; font-size: 25px;">CloudJournee</h1>
                        </span>
                        <h2 style="font-size: 18px; padding-left: 40px; margin-top: 0px"><u><span class="text-navy" style="font-family: fantasy">Cloud</span><span style="color: white">Optimization</span></u></h2>
                     </div>
                     <div class="logo-element">
                        CJ
                     </div>
                  </li>
                  <li class="special_link">
                     <a href="/index"><i class="fa fa-home"></i> <span class="nav-label">Home</span></a>
                  </li>
                  <li>
                     <a href="/dashboard"><i class="fa fa-dashboard"></i> <span class="nav-label">Dashboard</span></a>
                  </li>
                  <li>
                     <a href="/aws_accounts"><i class="fa fa-list-alt"></i> <span class="nav-label">Summary</span></a>
                  </li>
                  <li class="active">
                     <a href="/security"><i class="fa fa-shield"></i> <span class="nav-label">Security</span></a>
                  </li>
                  <li>
                     <a href="index.html"><i class="fa fa-money"></i> <span class="nav-label">Cost</span></a>
                  </li>
                  <li>
                     <a href="index.html"><i class="fa fa-refresh"></i> <span class="nav-label">Change Monitor</span></a>
                  </li>
               </ul>
            </div>
         </nav>
         <div id="page-wrapper" class="gray-bg">
            <div class="row border-bottom">
               <nav class="navbar navbar-static-top  " role="navigation" style="margin-bottom: 0">
                  <div class="navbar-header">
                     <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
                     <form role="search" class="navbar-form-custom" action="search_results.html">
                        <div class="form-group">
                           <input type="text" placeholder="Search for something..." class="form-control" name="top-search" id="top-search">
                        </div>
                     </form>
                  </div>
                  <ul class="nav navbar-top-links navbar-right">
                     <li class="dropdown">
                        <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                        <i class="fa fa-bell"></i>  <span class="label label-primary">8</span>
                        </a>
                        <ul class="dropdown-menu dropdown-alerts">
                           <li>
                              <a href="mailbox.html">
                                 <div>
                                    <i class="fa fa-envelope fa-fw"></i> You have 16 messages
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                 </div>
                              </a>
                           </li>
                           <li class="divider"></li>
                           <li>
                              <a href="profile.html">
                                 <div>
                                    <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                    <span class="pull-right text-muted small">12 minutes ago</span>
                                 </div>
                              </a>
                           </li>
                           <li class="divider"></li>
                           <li>
                              <a href="grid_options.html">
                                 <div>
                                    <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                 </div>
                              </a>
                           </li>
                           <li class="divider"></li>
                           <li>
                              <div class="text-center link-block">
                                 <a href="notifications.html">
                                 <strong>See All Alerts</strong>
                                 <i class="fa fa-angle-right"></i>
                                 </a>
                              </div>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <img alt="image" class="img-circle" src="{% static 'images/profile_small.jpg'%}" />
                     </li>
                     <li>
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">David Williams</strong>
                        </span></span> </a>
                        <ul class="dropdown-menu animated fadeInRight m-t-xs">
                           <li><a href="profile.html">Profile</a></li>
                           <li class="divider"></li>
                           <li><a href="login.html">Logout</a></li>
                        </ul>
                     </li>
                  </ul>
               </nav>
            </div>
            <div class="row wrapper border-bottom white-bg page-heading">
               <div class="col-sm-4">
                  <h2><span><i class="fa fa-amazon">&nbsp;</i>My Account</span> / <span style="color: #1ab394">Security</span></h2>
               </div>
            </div>
            <div class="row">
               <div class="col-lg-2 text-center">
                  <span class="chart" style="margin-bottom: 0px" data-percent="86">
                  <span class="percent" style="font-size: 25px; color: #F7102F"></span>
                  </span>
                  <h2><u>EC2</u></h2>
               </div>
               <div class="col-lg-2 text-center">
                  <span class="chart2" style="margin-bottom: 0px" data-percent="56">
                  <span class="percent" style="font-size: 25px; color: #33D5FF"></span>
                  </span>
                  <h2><u>S3</u></h2>
               </div>
               <div class="col-lg-2 text-center">
                  <span class="chart3" style="margin-bottom: 0px" data-percent="91">
                  <span class="percent" style="font-size: 25px; color: #1A343B"></span>
                  </span>
                  <h2><u>IAM</u></h2>
               </div>
               <div class="col-lg-2 text-center">
                  <span class="chart4" style="margin-bottom: 0px" data-percent="26">
                  <span class="percent" style="font-size: 25px; color: #1ab394"></span>
                  </span>
                  <h2><u>RDS</u></h2>
               </div>
               <div class="col-lg-2 text-center">
                  <span class="chart5" style="margin-bottom: 0px" data-percent="15">
                  <span class="percent" style="font-size: 25px; color: #F71067"></span>
                  </span>
                  <h2><u>VPC</u></h2>
               </div>
               <div class="col-lg-2 text-center">
                  <span class="chart6" style="margin-bottom: 0px" data-percent="95">
                  <span class="percent" style="font-size: 25px; color: #1062F7"></span>
                  </span>
                  <h2><u>CloudTrail</u></h2>
               </div>
            </div>
            <div class="row">
               <div class="col-lg-12">
                  <h1>EC2</h1>
                  <div class="ibox float-e-margins" style="margin-bottom: 5px">
                     <div class="ibox-title panel panel-primary">
                        <h5><span class="badge badge-info pull-left">3</span>&nbsp; EC2 Security groups Inbound rules allowing all traffic</h5>
                        <div class="ibox-tools">
                           <a class="collapse-link">
                           <i class="fa fa-chevron-up" id="loading-response"></i>
                           </a>
                        </div>
                     </div>
                     <div class="ibox-content" style="display: none;">
                        <div class="table-responsive">
                           <table class="table table-striped table-bordered table-hover" id="user-table">
                              <thead>
                                 <tr>
                                    <th>SL No</th>
                                    <th>Username</th>
                                    <th>Access Key</th>
                                    <th>Status</th>
                                    <th>Access Key Created Date</th>
                                    <th>Access Key Age</th>
                                    <th>Last Used Service</th>
                                    <th>Event Time</th>
                                    <th>Region</th>
                                    <th>IP Address</th>
                                    <th>Created By</th>
                                    <th>Created Date</th>
                                    <th>AttachedPolicies</th>
                                 </tr>
                              </thead>
                              <tbody id="user-data">
                                 <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </div>
                  </div>
                  <div class="ibox float-e-margins" style="margin-bottom: 5px">
                     <div class="ibox-title panel panel-primary">
                        <h5><span class="badge badge-info pull-left">2</span>&nbsp; EC2 Security groups Inbound rules port 3306 (MySQL) is opened to all</h5>
                        <div class="ibox-tools">
                           <a class="collapse-link">
                           <i class="fa fa-chevron-up"></i>
                           </a>
                        </div>
                     </div>
                     <div class="ibox-content" style="display: none;">
                        <table class="footable table table-stripped toggle-arrow-tiny">
                           <thead>
                              <tr>
                                 <th>Security Group Name</th>
                                 <th>Security Group ID</th>
                                 <th>VPC ID</th>
                                 <th style="width: 350px;">Description</th>
                                 <th>Attached Resources</th>
                                 <th>Region</th>
                                 <th>Action</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr>
                                 <td>mysecgroup</td>
                                 <td>sg-440bdd28</td>
                                 <td>vpc-9e9946f8</td>
                                 <td>Docker Machine</td>
                                 <td class="btn" style="margin-left: 40%" data-toggle="modal" data-target="#myModal"><span class="badge badge-warning">2</span></td>
                                 <td>us-west-2</td>
                                 <td><a href="#"><i class="fa fa-check text-navy"></i></a></td>
                              </tr>
                              <tr>
                                 <td>test</td>
                                 <td>sg-545b7c25</td>
                                 <td>vpc-9e9946f8</td>
                                 <td>launch-wizard-3 created 2018-10-11T11:31:07.809+05:30</td>
                                 <td class="btn" style="margin-left: 40%"><span class="badge badge-warning">7</span></td>
                                 <td>us-west-2</td>
                                 <td><a href="#"><i class="fa fa-check text-navy"></i></a></td>
                              </tr>
                              <tr>
                                 <td>devsec</td>
                                 <td>sg-463b7chg</td>
                                 <td>vpc-9e9946f8</td>
                                 <td>This security group was generated by AWS Marketplace and is based on recommended settings for CentOS 7 (x86_64) - with Updates HVM version 1704 provided by Centos.org</td>
                                 <td class="btn" style="margin-left: 40%"><span class="badge badge-warning">3</span></td>
                                 <td>us-west-2</td>
                                 <td><a href="#"><i class="fa fa-check text-navy"></i></a></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </div>
               </div>
            </div>
            <div class="modal inmodal" id="myModal" tabindex="-1" role="dialog" aria-hidden="true">
               <div class="modal-dialog" style="padding-top: 150px;">
                  <div class="modal-content animated bounceInRight">
                     <div class="modal-header" style="padding: 0px">
                        <button type="button" class="close" data-dismiss="modal" style="margin: 5px;"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h2>Attached Resources</h2>
                     </div>
                     <div class="modal-body" style="padding: 0px">
                        <div class="ibox-content">
                           <table class="table table-stripped toggle-arrow-tiny">
                              <thead>
                                 <tr>
                                    <th>EC2 Name</th>
                                    <th>EC2 ID</th>
                                    <th>VPC ID</th>
                                    <th>Region</th>
                                    <th>Availability zone</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr>
                                    <td>test</td>
                                    <td>i-dsgfghjkl16546461</td>
                                    <td>vpc-9e9946f8</td>
                                    <td>us-west-2</td>
                                    <td>us-west-2a</td>
                                 </tr>
                                 <tr>
                                    <td>prod</td>
                                    <td>i-fgccfghvcf56787gg</td>
                                    <td>vpc-9e9946f8</td>
                                    <td>us-west-2</td>
                                    <td class="btn" style="margin-left: 40%" data-toggle="modal" data-target="#myModal01">us-west-2a</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="modal inmodal" id="myModal01" tabindex="-1" role="dialog" aria-hidden="true">
               <div class="modal-dialog" style="padding-top: 150px;">
                  <div class="modal-content animated bounceInRight">
                     <div class="modal-header" style="padding: 0px">
                        <button type="button" class="close" data-dismiss="modal" style="margin: 5px;"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h2>Attached Resources</h2>
                     </div>
                     <div class="modal-body" style="padding: 0px">
                        <div class="ibox-content">
                           <table class="table table-stripped toggle-arrow-tiny">
                              <thead>
                                 <tr>
                                    <th>EC2 Name</th>
                                    <th>EC2 ID</th>
                                    <th>VPC ID</th>
                                    <th>Region</th>
                                    <th>Availability zone</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr>
                                    <td>test</td>
                                    <td>i-dsgfghjkl16546461</td>
                                    <td>vpc-9e9946f8</td>
                                    <td>us-west-2</td>
                                    <td>us-west-2a</td>
                                 </tr>
                                 <tr>
                                    <td>prod</td>
                                    <td>i-fgccfghvcf56787gg</td>
                                    <td>vpc-9e9946f8</td>
                                    <td>us-west-2</td>
                                    <td>us-west-2a</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </div>
                  </div>
               </div>
            </div>

         </div>
      </div>
      <div class="footer" style="position: fixed;">
         <div class="pull-right">
            <span style="color: #1ab394;"><strong>CloudJournee</strong></span>
         </div>
         <div>
            <strong>Copyright</strong> Example Company &copy; 2014-2017
         </div>
      </div>
      <!-- Mainly scripts -->
      <script src="{% static 'js/jquery-3.1.1.min.js' %}"></script>
      <script src="{% static 'js/bootstrap.min.js' %}"></script>
      <script src="{% static 'js/plugins/metisMenu/jquery.metisMenu.js' %}"></script>
      <script src="{% static 'js/plugins/slimscroll/jquery.slimscroll.min.js' %}"></script>
      <!-- Custom and plugin javascript -->
      <script src="{% static 'js/inspinia.j' %}s"></script>
      <script src="{% static 'js/plugins/pace/pace.min.js' %}"></script>
      <script src="{% static 'js/plugins/c3/c3.min.js' %}"></script>
      <script src="{% static 'js/plugins/d3/d3.min.js' %}"></script>
      <script src="{% static 'js/plugins/easy_chart/jquery.easypiechart.min.js' %}"></script>
      <script src="{% static 'js/plugins/easy_chart/jquery.easing.min.js' %}"></script>
      <script src="{% static 'js/plugins/footable/footable.all.min.js' %}"></script>
      <script>
         $(document).ajaxStart(function() {
           $(".body-opacity").addClass('opacity');
           $("#loading").show();

         }).ajaxStop(function() {
           $("#loading").hide();
           $(".body-opacity").removeClass('opacity')
         });

         var value = 0;
         $("#loading-response").click(function() {

             if(value % 2 == 0){
           $.ajax({
             type: "GET",
             dataType: 'json',
             url: "/loading",
             success: function(response) {
               var len = response.data.length;
               console.log(response);
                var table_data = '';
                if(len > 0){
                             for(var i=0;i<len;i++){

                     table_data += '<tr>';
                     table_data += '<td>'+(i+1)+'</td>';
                     table_data += '<td>'+response.data[i].IAMUser+'</td>';
                     table_data += '<td>'+response.data[i].AccessKeyId+'</td>';
                     table_data += '<td>'+response.data[i].Status+'</td>';
                     table_data += '<td>'+response.data[i].AccessKeyIdCreatedDate+'</td>';
                     table_data += '<td>'+response.data[i].AccessKeyAge+'</td>';
                     table_data += '<td>'+response.data[i].LastUsedService+'</td>';
                     table_data += '<td>'+response.data[i].EventTime+'</td>';
                     table_data += '<td>'+response.data[i].AWSRegion+'</td>';
                     table_data += '<td>'+response.data[i].IPAddress+'</td>';
                     table_data += '<td>'+response.data[i].CreatedBy+'</td>';
                     table_data += '<td>'+response.data[i].CreatedDate+'</td>';
                     table_data += '<td>'+response.data[i].AttachedPolicies+'</td>';
                     table_data += '</tr>';
                 }
                 }
                     $('#user-data').empty();
                     $('#user-data').append(table_data);
             }
           });
             }
           value ++;
         });
      </script>
      <script>
         $(function() {
             $('.chart').easyPieChart({
                 easing: 'easeOutBounce',
                 barColor: '#F7102F',
                 lineWidth:5,
                 onStep: function(from, to, percent) {
                     $(this.el).find('.percent').text(Math.round(percent));
                 }
             });
             $('.chart2').easyPieChart({
                 easing: 'easeOutBounce',
                 barColor: '#33D5FF',
                 lineWidth:5,
                 onStep: function(from, to, percent) {
                     $(this.el).find('.percent').text(Math.round(percent));
                 }
             });
             $('.chart3').easyPieChart({
                 easing: 'easeOutBounce',
                 barColor: '#1A343B',
                 lineWidth:5,
                 onStep: function(from, to, percent) {
                     $(this.el).find('.percent').text(Math.round(percent));
                 }
             });
             $('.chart4').easyPieChart({
                 easing: 'easeOutBounce',
                 barColor: '#1ab394',
                 lineWidth:5,
                 onStep: function(from, to, percent) {
                     $(this.el).find('.percent').text(Math.round(percent));
                 }
             });
             $('.chart5').easyPieChart({
                 easing: 'easeOutBounce',
                 barColor: '#F71067',
                 lineWidth:5,
                 onStep: function(from, to, percent) {
                     $(this.el).find('.percent').text(Math.round(percent));
                 }
             });
             $('.chart6').easyPieChart({
                 easing: 'easeOutBounce',
                 barColor: '#1062F7',
                 lineWidth:5,
                 onStep: function(from, to, percent) {
                     $(this.el).find('.percent').text(Math.round(percent));
                 }
             });
         });

      </script>
      <script>
         $(document).ready(function() {

             $('.footable').footable();

         });

      </script>
   </body>
</html>